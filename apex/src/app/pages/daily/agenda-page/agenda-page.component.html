<div class="sticky-top" style="top:30px;z-index:10000">
	<div style="position:absolute;float:right;right:10px;">
		<button type="button" 
			(click)="open(new_activity, null)"
			class="btn btn-silver ft-plus"
			title="Registrar Atividade"
			style="margin-left:10px"
			>																
		</button>
	</div>
</div>	

<div class="row">
	<div class="col-12">		
		<div class="card">
			<div class="card-header" style="background-color:white;width:100%;padding:10px">
				<div class="row">
					<div class="col-12">
						<div class="row">
							<div class="col-12 col-xl-6 col-lg-6 col-md-12">
								<h4 class="card-title d-none d-md-block">
									Diário de Atividades - Praticantes 																																
								</h4>
								<h4 class="card-title d-block d-md-none" style="font-size:14px">
									Diário de Atividades
									<br /> Praticantes 																																
								</h4>
								<h6 style="margin:0;margin-top:5px;margin-bottom:5px;font-weight:bold;color:black;cursor:pointer;border-bottom:1px dotted silver;" 
								*ngIf="!show_change_branch"
								(click)="show_change_branch = !show_change_branch">									
									{{ current_branch_name }}
								</h6>
								<div class="form-group">
									<select id="branch" 
										[(ngModel)]="current_branch" 
										(ngModelChange)="branchSelected($event)"									
										*ngIf="show_change_branch"
										class="form-control"
										style="width:100%"
										>			
										<option value="0">Todos os Núcleos</option>			
										<option *ngFor="let b of branches" [value]="b.id">{{b.name}}</option>
									</select>
								</div>
							</div>	
							<div class="col-12 col-xl-2 col-lg-2 col-md-4 col-sm-12">
								<daily-change-view initial_display="agenda"></daily-change-view>	
							</div>
							<div class="col-9 col-xl-3 col-lg-3 col-md-6">
								<div class="form-group">													
									<div class="input-group">
										<input class="form-control text-center" 										
										placeholder="dd/mm/aaaa"
										name="current_date" 
										[(ngModel)]="current_date" 
										(ngModelChange)="change_current_date($event)"
										ngbDatepicker #dpCurrentDate="ngbDatepicker" />
										<div class="input-group-addon" (click)="dpCurrentDate.toggle()">
											<i class="ft-calendar" style="cursor: pointer;"></i>
										</div>		
									</div>
								</div>
							</div>													
						</div>						
					</div>					
				</div>
			</div>
			<div class="card-body">	
				<div class="row d-block d-lg-none">
					<div class="col-12">
						<current-activities></current-activities>
					</div>
				</div>
				<div class="row">
					<div class="col-12 col-sm-12 col-lg-7">
						<div class="row" *ngFor="let schedule of agenda">					
							<div class="col-12" 
							style="border:1px solid silver;margin-bottom:10px;border-bottom:0;" 
							*ngIf="schedule.current_incidents && schedule.current_incidents.length > 0">	
								<h4 *ngIf="schedule.schedule_group <= 0"></h4>																									
								<h4 *ngIf="schedule.schedule_group > 0" style="margin-top:12px">{{ ('00' + schedule.schedule_group).slice(-2) }}:00</h4>																									
								<div class="row" *ngFor="let incident of schedule.current_incidents, let k = index">
									<div class="col-12" 
										style="line-height:2em;border:1px solid silver;border-left:0;border-right:0"
										*ngIf="current_branch <= 0 || incident.branch_id == current_branch"
										[style.border-top]="k != 0 ? '0' : '1px solid silver'">

										<incident-agenda-listitem [incident]="incident"></incident-agenda-listitem>
										
									</div>																										
								</div>					
							</div>							
						</div>		
					</div>	
					<div class="col-5 col-lg-5 d-none d-lg-block">							
						<current-activities
						[branch]="current_branch"> 							
						</current-activities>						
					</div>
				</div>			
			</div>
		</div>		
	</div>
</div>


<ng-template #new_activity let-c="close" let-d="dismiss">
	<new-incident-modal [d]="d" [branches]="branches"
		[current_branch]="current_branch"		
		[incident_types]="manual_incident_types"
	></new-incident-modal>
</ng-template>	