

<style>
	.current {
		background-color: #eeeeee
	}
	.current2 {
		background-color: #dddddd
	}
</style>

<div class="row">
	<div class="col-12">
		<!-- Kick start -->
		<div id="kick-start" class="card">
			<div class="card-header">
				<h4 class="card-title">
					Di√°rio de Atividades 					

					<select id="branch" [(ngModel)]="current_branch" (ngModelChange)="branchSelected($event)">						
						<option *ngFor="let b of branches" [value]="b.EmpKey">{{b.name}}</option>
					</select>	
				</h4>
			</div>
			<div class="card-body">		
				<table>
					<tr>
						<td>
							<table class="table-sm">
								<tr>						
									<td *ngFor="let c of cols, let k3 = index" 
										align="center" 
										[ngClass]=" k3 == current_week_day + 3 ? 'current2' : '' "
										[ngStyle]="{ 'min-width': c.width + 'px', 'max-width': c.width + 'px' }"
										>										
										<div>
											{{ c.name }} 
										</div>									
									</td>
								</tr>
							</table>
						</td>
					</tr>
					<tr *ngFor="let d of domains, let k5 = index">
						<td>																				
							<h6 style="margin-top:20px">
								{{ d.abrev }} 
								<i>
									(
									{{ d.number_of_members }} 
									Membro<span *ngIf="d.number_of_members > 1">s</span> 
									Ativo<span *ngIf="d.number_of_members > 1">s</span>
									)
								</i>
							</h6>
							<table class="table-sm table-striped table-bordered table-responsive">								
								<tr *ngFor="let person of d.daily, let k4 = index">
									<td style="min-width:160px;max-width:160px;" valign="top">
										{{ person.name }}										
									</td>								
									<td valign="top" align="center" style="min-width:30px;max-width:30px;">
											<span *ngIf="person.scheduling_status == 3">												
												<i class="ft-watch" style="color:orange"
													[title]="person.scheduling_description">
												</i>
											</span>
											<span *ngIf="person.scheduling_status > 0 && person.scheduling_status != 3">
												<i class="ft-watch" style="color:red"													
													[title]="person.scheduling_description">
												</i>
											</span>
									</td>
									<td valign="top" align="center" style="min-width:30px;max-width:30px;">
											<span *ngIf="person.financial_status == 3">												
												<i class="icon-wallet" style="color:orange"
												[title]="person.financial_description"
												></i>
											</span>
											<span *ngIf="person.financial_status > 0 && person.financial_status != 3">
												<i class="icon-wallet" style="color:red"													
													[title]="person.financial_description"
												>
												</i>
											</span>	
									</td>	
									<td valign="top" style="min-width:150px;max-width:150px;" *ngFor="let item of person.dates, let k2 = index" [ngClass]=" k2 == current_week_day ? (k4 % 2 == 0 ? 'current2' : 'current') : '' ">							
										<ng-template ngFor let-i [ngForOf]="item" let-k=index let-m=first>																
											<span *ngIf="!m"><br /></span>	
											<a (click)="open(content, i)">
												<b *ngIf="i.type != 2">{{ i.abrev }}</b> 
												<b>{{ i.title }}</b>					
											</a>																					
											<span *ngIf="i.short_description.length > 0 && i.type != 2">({{ i.short_description }})</span>										
										</ng-template>							
									</td>																		
								</tr>
							</table>	
					</td>
				</tr>
			</table>	
			</div>
		</div>		
	</div>
</div>

<ng-template #content let-c="close" let-d="dismiss">
	<div class="modal-header">
		<h6 class="modal-title" style="font-weight: bold">{{ current_incident.long_description }}</h6>
		<button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
		<span aria-hidden="true">&times;</span>
		</button>
	</div>
	<div class="modal-body">
		<button type="button" class="btn btn-success btn-raised" (click)="c('Close click')">Confirmar</button>
		<button type="button" class="btn btn-primary btn-raised" (click)="c('Close click')">Reagendar</button>		
	</div>
	<!--div class="modal-footer">
		<button type="button" class="btn btn-secondary btn-raised" (click)="c('Close click')">Close</button>
	</div-->
</ng-template>