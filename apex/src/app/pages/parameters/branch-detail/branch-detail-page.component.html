<div class="card" *ngIf="current">
    <div class="card-body" style="padding:10px;">
        <h4 [routerLink]="['/parameters/branches']" class="cursor_pointer">NÃºcleos - {{ current.name }}</h4>
        <div class="row">
            <div class="col-4">
                <div class="col-12 col-xl-12 col-md-6"  style="margin-bottom:30px;">
                    <div class="row" style="border-bottom: 1px solid black">
                        <div class="col-10 col-xl-10 col-sm-9">
                            <h6 style="padding:0;margin:0;font-weight:bold"><i class="fas fa-credit-card"></i> Adquirentes </h6>
                        </div>
                        <div class="col-2 col-sm-3 col-xl-2 text-right">
                            <button type="button" class="btn btn-silver btn-sm" 
                                style="margin:0;padding:2px;line-height:10px"
                                (click)="open_add_acquirer(new_acquirer);">
                                <i class="fas fa-plus-circle"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="row" *ngIf="!current.acquirers || current.acquirers.length == 0">
                        <div class="col-12 text-center">
                            Nenhum Adquirente encontrado
                        </div>
                    </div>
                    <div class="row" *ngFor="let ac of current.acquirers">
                        <div class="col-10">
                            {{ ac.name }}
                        </div>
                        <div class="col-2 col-sm-3 col-xl-2 text-right">
                            <button type="button" class="btn btn-silver btn-sm" 
                                style="margin:0;padding:2px;line-height:10px"			                                        
                                *ngIf="!ac.remove"
                                (click)="ac.remove = true">
                                <i class="ft-trash-2"></i>                                        
                            </button>                                    
                            <button type="button" class="btn btn-danger btn-sm" 
                                *ngIf="ac.remove"
                                style="margin:0;padding:2px;line-height:10px"			                                        
                                (click)="toggle_associate_acquirer(ac.id);">
                                <i class="ft-trash-2"></i>                                        
                            </button>
                            <button type="button" class="btn btn-secondary btn-sm" 
                                *ngIf="ac.remove"
                                style="margin:0;padding:2px;line-height:10px"			                                        
                                (click)="ac.remove = false">
                                <i class="icon-action-undo"></i>                                        
                            </button>                                    
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-4">
                <div class="col-12 col-xl-12 col-md-6"  style="margin-bottom:30px;">
                    <div class="row" style="border-bottom: 1px solid black">
                        <div class="col-10 col-xl-10 col-sm-9">
                            <h6 style="padding:0;margin:0;font-weight:bold; padding-bottom:6px">Produtos </h6>
                        </div>
                    </div>
                    
                    <div class="row" *ngIf="!current.products || current.products.length == 0">
                        <div class="col-12 text-center">
                            Nenhum produto vinculado
                        </div>
                    </div>
                    <div class="row" *ngFor="let pr of current.products">
                        <div class="col-12">
                            {{ pr.name }}
                        </div>                        
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<ng-template #new_acquirer let-c="close" let-d="dismiss">
    <div class="modal-header">
        <h5 class="modal-title" style="font-weight: bold">
            Associar Adquirente
        </h5>
        <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
        <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">		
        <div class="row">
            <div class="col-12">
                <label for="item_name">Adquirente</label>                                                									
                <div class="input-group">							
                    <select id="item_branch" 
                        name="item_branch"
                        [(ngModel)]="current_acquirer"                             																	
                        class="form-control"								
                        >			                            		
                        <option *ngFor="let b of acquirers" [value]="b.id">{{b.name}}</option>
                    </select>                                  
                </div>
            </div>
        </div>            
    </div>
    <div class="modal-footer" *ngIf="saving">        
            <i class="fas fa-circle-notch fa-spin"></i> &nbsp; Executando...
        </div>
    <div class="modal-footer" *ngIf="!saving">
        <button type="button" class="btn btn-success" 
            *ngIf="current_acquirer != null"
            (click)="toggle_associate_acquirer(current_acquirer, d);">
            <i class="icon-check"></i>
            Associar
        </button>        
        <button type="button" class="btn btn-silver" 			            
            (click)="d('Cancelled')">
            <i class="icon-action-undo"></i>
            Cancelar
        </button>        
    </div>
</ng-template>