<div class="card" *ngIf="voucher">
  <div class="card-body" style="padding:10px;">
    <h4 [routerLink]="['/parameters/vouchers']" class="cursor_pointer"> Vouchers - {{ voucher.title }}</h4>

    <div class="row">
      <div class="col-12 col-md-6">
        <div class="row">
          <div class="col-12">
            <label for="item_title">Título</label>
            <div class="input-group">
              <input class="form-control" [(ngModel)]="voucher.title" autocomplete="off" placeholder="Título do voucher" maxlength="100"
                id="item_title" name="item_title" />
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-12">
            <label for="item_youtube_url">URL Youtube:</label>
            <div class="input-group">
              <input class="form-control" [(ngModel)]="voucher.youtube_url"
                autocomplete="off" placeholder="https://www.youtube.com/watch?v=CODIGO" maxlength="100"
                id="item_youtube_url" name="item_youtube_url" />
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-6">
            <label for="item_url">Url</label>
            <div class="input-group">
              <input class="form-control text-center" [(ngModel)]="voucher.url" autocomplete="off" placeholder="Url ('ohbarbeiro', 'membros...')"
                maxlength="50" id="item_url" name="item_url" />
            </div>
          </div>
          <div class="col-6">
            <label for="item_initials">Iniciais</label>
            <div class="input-group">
              <input class="form-control text-center" [(ngModel)]="voucher.initials" autocomplete="off" placeholder="Iniciais do Voucher"
                maxlength="3" id="item_initials" name="item_initials" />
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-12 pb-2">            
            <label for="item_voucher_type">Tipo</label>
            <select [(ngModel)]="voucher.voucher_type"
              id="item_voucher_type"
              [compareWith]="entity_compare"
              class="form-control form-control-sm"
              [ngModelOptions]="{standalone: true}">
              <option [ngValue]="{id: 1}">Campanha</option>
              <option [ngValue]="{id: 2}">Parceria</option>
            </select>
          </div>
        </div>
        <div class="row">
          <div class="col-12">
            <label for="item_header_title">Título da página do Voucher</label>
            <div class="input-group">
              <input class="form-control" [(ngModel)]="voucher.header_title" autocomplete="off" placeholder="Agende sua semana de aula grátis"
                maxlength="35" id="item_header_title" name="item_header_title" />
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-12">
            <label for="item_header_text">Texto do topo</label>
            <div class="input-group">
              <textarea class="form-control" id="item_header_text" name="item_header_text" autocomplete="off" [(ngModel)]="voucher.header_text"
                rows="4"></textarea>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-12">
            <label for="item_anonymous_header_text">Texto do topo - Anônimo </label>
            <div class="input-group">
              <textarea class="form-control" id="item_anonymous_header_text" name="item_anonymous_header_text" autocomplete="off" [(ngModel)]="voucher.anonymous_header_text"
                rows="4"></textarea>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-12">
            <label for="item_additional_question">Pergunta Adicional</label>
            <div class="input-group">
              <input class="form-control" [(ngModel)]="voucher.additional_question" autocomplete="off" placeholder="" maxlength="200" id="item_additional_question"
                name="item_additional_question" />
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-12">
            <label for="item_confirm_button_text">Texto do botão de confirmação</label>
            <div class="input-group">
              <input class="form-control" [(ngModel)]="voucher.confirm_button_text" autocomplete="off" placeholder="Iniciar minha semana de aulas grátis"
                maxlength="40" id="item_confirm_button_text" name="item_confirm_button_text" />
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-12">
            <label for="item_final_text">Texto de Finalização</label>
            <div class="input-group">
              <textarea class="form-control" id="item_final_text" name="item_final_text" autocomplete="off" [(ngModel)]="voucher.final_text"
                rows="4"></textarea>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-12" *ngIf="saving">
            <i class="fas fa-circle-notch fa-spin"></i> &nbsp; Executando...
          </div>

          <div class="col-12" *ngIf="!saving">
            <button type="button" class="btn btn-success" (click)="save(d);">
              <i class="icon-check"></i>
              Salvar
            </button>

            {{ result_form_text }}
          </div>
        </div>

      </div>
      <div class="col-12 col-md-6">
        <div class="col-12 col-xl-12 col-md-6" style="margin-bottom:30px;">
          <div class="row" style="border-bottom: 1px solid black">
            <div class="col-10 col-xl-10 col-sm-9">
              <h6 style="padding:0;margin:0;font-weight:bold">
                Núcleos

                <span *ngIf="saving"><i class="fas fa-spinner fa-spin"></i></span>
              </h6>
            </div>
          </div>

          <div class="row" *ngFor="let b of branches">
            <div class="col-11" style="padding-top: 5px; padding-bottom:5px;">
              <div style="display:inline-block;margin-left:10px">
                <label class="option_container" style="font-weight:normal;font-size: 1em;">
                  {{ b.name }}
                  <input type="checkbox" [checked]="b.receive_voucher"
                  (change)="toggle_receive_voucher(b)"
                  id="item_receive_voucher" name="item_receive_voucher"
                  />
                  <span class="checkmark" *ngIf="!saving"></span>
                </label>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
